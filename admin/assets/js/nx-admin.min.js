!function(e){"use strict";e.notificationx=e.notificationx||{},e(document).ready(function(){e.notificationx.init(),e.notificationx.installPlugin(),e("body").on("click",".nx-metatab-menu li, .nx-builder-tab-menu li, .nx-meta-next, .nx-quick-builder-btn",function(t){t.preventDefault(),e.notificationx.tabChanger(this)}),e("body").on("click",".nx-meta-modal-next",function(t){t.preventDefault(),e(".nx-press-bar-modal-wrapper.active").removeClass("active"),e.notificationx.tabChanger(this)}),e("body").on("change",".nx-single-theme-wrapper > input:checked",function(t){t.preventDefault(),e.notificationx.templateForTheme()}),e("body").on("click",".nx-email-test",function(t){t.preventDefault(),e.notificationx.testReport()}),e("body").on("change","#nx_meta_evergreen_timer",function(){if(e(".nx-time_randomize_between").hide(),e(".nx-time_rotation").hide(),!e("#nx_meta_enable_countdown").is(":checked"))return e(".nx-time_randomize").hide(),void e(".nx-time_reset").hide();e("#nx_meta_time_randomize").is(":checked")&&this.checked?(e(".nx-time_rotation").hide(),e(".nx-time_randomize_between").show()):this.checked&&(e(".nx-time_rotation").show(),e(".nx-time_randomize_between").hide()),this.checked?(e(".nx-countdown_start_date").hide(),e(".nx-countdown_end_date").hide(),e(".nx-countdown_expired_text").hide()):(e(".nx-countdown_start_date").show(),e(".nx-countdown_end_date").show(),e(".nx-countdown_expired_text").show())}),e("body").on("change","#nx_meta_time_randomize",function(){if(e(".nx-time_randomize_between").hide(),e(".nx-time_rotation").hide(),!e("#nx_meta_enable_countdown").is(":checked")||!e("#nx_meta_evergreen_timer").is(":checked"))return e(".nx-time_randomize").hide(),void e(".nx-time_reset").hide();this.checked?(e(".nx-time_rotation").hide(),e(".nx-time_randomize_between").show()):(e(".nx-time_rotation").show(),e(".nx-time_randomize_between").hide())}),e("body").on("change","#nx_meta_enable_countdown",function(){e("#nx_meta_evergreen_timer").trigger("change"),e("#nx_meta_time_randomize").trigger("change")}),e("#nx_meta_evergreen_timer").trigger("change"),e("#nx_meta_time_randomize").trigger("change")}),e.notificationx.installPlugin=function(){e(".nx-on-click-install").each(function(t){e(this).on("click",function(t){t.preventDefault();var n=e(this);n.addClass("install-now updating-message"),n.text("Installing...");var i=n.data("nonce"),a=n.data("slug"),o=n.data("plugin_file");e.ajax({url:ajaxurl,type:"POST",data:{action:"wpdeveloper_upsale_core_install_notificationx",_wpnonce:i,slug:a,file:o},success:function(t){n.text("Installed"),n.hasClass("nx-bar_with_elementor_install")?setTimeout(function(){e(".nx-bar-install-elementor").remove(),e(".nx-bar_with_elementor").removeClass("hidden")},2e3):setTimeout(function(){n.parents(".nx-field").hide()},2e3)},error:function(e){console.log(e),n.removeClass("install-now updating-message"),alert(e)},complete:function(){n.attr("disabled","disabled"),n.removeClass("install-now updating-message")}})})})},e(window).load(function(){e(".nx-preloader").fadeOut({complete:function(){e(".nx-metatab-inner-wrapper").fadeIn()}});var t=e.notificationx.get_query_vars("page");if(null!=t&&t.indexOf("nx-settings")>=0){var n=t.split("#");e('.nx-settings-menu li[data-tab="'+n[1]+'"]').trigger("click")}e("body").on("change",".nx_meta_display_type",function(){var t=e(this).val();switch(e.notificationx.get_instructions_enabled(t,!1),t){case"conversions":e(".nx-themes .nx_meta_theme:checked").trigger("change"),e.notificationx.trigger(".nx_meta_conversion_from"),e("#nx_meta_advance_edit").trigger("change");break;case"comments":e(".nx-comment_themes .nx_meta_comment_theme:checked").trigger("change"),e.notificationx.trigger(".nx_meta_comments_source"),e("#nx_meta_comment_advance_edit").trigger("change");break;case"reviews":e(".nx-wporg_themes .nx_meta_wporg_theme:checked").trigger("change"),e.notificationx.trigger(".nx_meta_reviews_source"),e("#nx_meta_wporg_advance_edit").trigger("change");break;case"download_stats":e(".nx-wpstats_themes .nx_meta_wpstats_theme:checked").trigger("change"),e.notificationx.trigger(".nx_meta_stats_source"),e("#nx_meta_wpstats_advance_edit").trigger("change");break;case"elearning":e(".nx-elearning_themes .nx_meta_elearning_theme:checked").trigger("change"),e.notificationx.trigger(".nx_meta_elearning_source"),e("#nx_meta_elearning_advance_edit").trigger("change");break;case"donation":e(".nx-donation_themes .nx_meta_donation_theme:checked").trigger("change"),e.notificationx.trigger(".nx_meta_donation_source"),e("#nx_meta_donation_advance_edit").trigger("change");break;case"form":e(".nx-form_themes .nx_meta_form_theme:checked").trigger("change"),e.notificationx.trigger(".nx_meta_form_source"),e("#nx_meta_form_advance_edit").trigger("change")}e.notificationx.templateForTheme()}),e("body").on("change","#nx_meta_wp_stats_template_new #nx_meta_wp_stats_template_new_third_param",function(){var t=e(this).val();if("tag_custom_stats"==t)return"";e("#nx_meta_wp_stats_template_new #nx_meta_wp_stats_template_new_fourth_param").val(t+"_text").trigger("change")}),e("body").on("change",".nx_meta_conversion_from",function(t){var n=e(this).val();switch(e.notificationx.get_instructions_enabled(!1,n),e(".nx-themes .nx_meta_theme:checked").trigger("change"),e("#nx_meta_combine_multiorder:checked").trigger("change"),n){case"woocommerce":e("#nx_meta_woo_template_adv").trigger("change")}}),e("body").on("change","#nx_meta_disable_reporting",function(t){e(this).is(":checked")||e("#nx_meta_reporting_frequency").trigger("change")}),e("body").on("change",".nx_meta_elearning_source",function(){var t=e(this).val();switch(e.notificationx.get_instructions_enabled(!1,t),t){case"learndash":e("#nx_meta_ld_product_control").trigger("change");break;case"tutor":e("#nx_meta_tutor_product_control").trigger("change")}}),e("body").on("change",".nx_meta_donation_source",function(){var t=e(this).val();switch(e.notificationx.get_instructions_enabled(!1,t),t){case"give":e("#nx_meta_give_forms_control").trigger("change")}}),e("body").on("change",".nx_meta_form_source",function(){var t=e(this).val();e.notificationx.get_instructions_enabled(!1,t)}),e("body").on("change",".nx_meta_comments_source",function(){var t=e(this).val();e.notificationx.get_instructions_enabled(!1,t),e(".nx-comment_themes .nx_meta_comment_theme:checked").trigger("change")}),e("body").on("change",".nx_meta_reviews_source",function(){var t=e(this).val();switch(e.notificationx.get_instructions_enabled(!1,t),e(".nx-wporg_themes .nx_meta_wporg_theme:checked").trigger("change"),e("#nx_meta_wp_reviews_template_adv").trigger("change"),t){case"wp_reviews":e("#nx_meta_wp_reviews_template_adv").trigger("change"),(n=e("#nx_meta_wp_reviews_template_new_third_param"))[0][0].innerText="Plugin Name",n.select2();break;case"woo_reviews":var n;(n=e("#nx_meta_wp_reviews_template_new_third_param"))[0][0].innerText="Product Name",n.select2()}}),e("body").on("change",".nx_meta_stats_source",function(){var t=e(this).val();switch(e.notificationx.get_instructions_enabled(!1,t),e(".nx-wpstats_themes .nx_meta_wpstats_theme:checked").trigger("change"),e("#nx_meta_wp_stats_template_adv").trigger("change"),t){case"wp_stats":e("#nx_meta_wp_stats_template_adv").trigger("change")}}),e("body").on("change",".nx-builder-content-wrapper .nx_meta_display_type",function(t){var n=t.currentTarget.value,i=notificationx.title_of_types[n],a=(new Date).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});e(".finalize_notificationx_name").text("NotificationX - "+i+" - "+a)}),e(".nx_meta_display_type:checked").trigger("change")}),e.notificationx.get_instructions_enabled=function(t,n){var i=!1;n||0==t?(i&&(i=!1),Array.from(document.querySelectorAll("#nx-instructions .nxins-type .nxins-type-source")).forEach(function(e){e.style.display="none",e.classList.contains(n)&&(e.style.display="block",i=!0)})):Array.from(document.querySelectorAll("#nx-instructions .nxins-type")).forEach(function(e){e.style.display="none",e.classList.contains(t)&&(e.style.display="block",i=!0)}),i?e("#nx-instructions").show():e("#nx-instructions").hide()},e.notificationx.init=function(){e.notificationx.enabledDisabled(),e.notificationx.toggleFields(),e.notificationx.bindEvents(),e.notificationx.initializeFields(),e.notificationx.create_nx_bar()},e.notificationx.create_nx_bar=function(){e("body").on("click",".nx-bar_with_elementor",function(t){t.preventDefault(),e(this).addClass("active"),e(".nx-press-bar-modal-wrapper").addClass("active"),e(".nx-metatab-menu > ul > li[data-tab='content_tab']").hide(),e("#nx-design_tab .nx-meta-next").data("tab","display_tab"),e("#nx-design_tab .nx-meta-next").data("tabid","4")}),e(".nx-modal-close").on("click",function(t){t.preventDefault(),t.currentTarget.classList.contains("nx-template-imported")||(e(".nx-metatab-menu > ul > li[data-tab='content_tab']").show(),e("#nx-design_tab .nx-meta-next").data("tab","content_tab"),e("#nx-design_tab .nx-meta-next").data("tabid","3"),e(".nx-bar_with_elementor").removeClass("active")),e(".nx-press-bar-modal-wrapper").removeClass("active")}),e(".nx-bar_with_elementor-import").on("click",function(t){t.preventDefault(),e(".nx-press-bar-modal-preload").addClass("active"),e(".nx-press-bar-modal-preload.active .nx-modal-loading-text").addClass("active");var n=e(this),i=n.data("theme"),a=n.data("nonce"),o=e("#post").serializeArray(),r=n.data("the_post");e.ajax({type:"post",url:window.ajaxurl,data:{action:"nx_create_bar",nonce:a,bar_id:r,theme:i,post_data:o},success:function(t){e(".nx-modal-close").addClass("nx-template-imported"),e(".nx-press-bar-modal-preload.active .nx-modal-loading-text.active").removeClass("active"),e(".nx-press-bar-modal-preload.active .nx-modal-success-text").addClass("active")}}).fail(function(e){console.log(e)})}),e(".nx-bar_with_elementor-remove").on("click",function(){var t=e(this),n=t.data("nonce"),i=t.data("bar_id"),a=t.data("post_id");e.ajax({type:"post",url:window.ajaxurl,data:{action:"nx_create_bar_remove",nonce:n,bar_id:i,post_id:a},success:function(e){console.log(e)}})})},e.notificationx.trigger=function(t){null==e(t+":checked").val()?e(t+":first").trigger("click"):e(t+":checked").is(":disabled")?e(".nx-radio-pro").trigger("click"):e(t+":checked").trigger("change")},e.notificationx.templateForTheme=function(){var t,n,i,a=e(".nx_meta_display_type:checked").val();if("press_bar"!==a){t=e(".nx_meta_"+notificationx.source_types[a]+":checked").val(),notificationx.theme_sources.hasOwnProperty(t)&&(i="object"==typeof notificationx.theme_sources[t]?e(".nx_meta_"+notificationx.theme_sources[t][a]+":checked").val():e(".nx_meta_"+notificationx.theme_sources[t]+":checked").val());var o="";if(notificationx.template_keys.hasOwnProperty(t)&&("object"==typeof notificationx.template_keys[t]?(n=e("#nx_meta_"+notificationx.template_keys[t][a]),o=notificationx.template_keys[t][a]):(n=e("#nx_meta_"+notificationx.template_keys[t]),o=notificationx.template_keys[t])),!(n.length<=0)){i.indexOf("comments-")>=0&&(o="comments_template_new"),i.indexOf("subs-")>=0&&(o="mailchimp_template_new"),i.indexOf("reviews-")>=0&&(o="wp_reviews_template_new"),i.indexOf("stats-")>=0&&(o="wp_stats_template_new");var r="";if(null!=o){r=o.replace("_new","_adv");var c=o.replace("_new","");r=e("#nx_meta_"+r),c=e("#nx_meta_"+c)}var s=n.attr("id");if("maps_theme"===i||"comments-maps_theme"===i||"subs-maps_theme"===i||"conv-theme-six"===i?(c.hide(),n=e("#nx_meta_maps_theme_template_new"),r=e("#nx_meta_"+(r="maps_theme_template_adv"))):c.show(),null!=o&&null!=r[0]&&!0===r[0].checked&&r.trigger("change"),Object.keys(notificationx.template_settings).indexOf(s)>=0&&Object.keys(notificationx.template_settings[s]).indexOf(i)>=0){var l=notificationx.template_settings[s][i];n.find("input, select").each(function(t,n){var i=e(n).data("subkey");Object.keys(l).indexOf(i)>=0&&("text"===n.type&&"INPUT"===n.nodeName?e(n).val(l[i]):e(n).val(l[i]).trigger("change"))})}}}},e.notificationx.bindEvents=function(){e("#nx_meta_show_on").trigger("change"),e("body").on("click",".nx-adv-checkbox-wrap label, #nx_sound_checkbox, .nx-stats-tease, .nx-cmo-conf",function(t){if(void 0!==e(this)[0].dataset.swal){void 0!==e(this)[0].dataset.swal&&t.preventDefault();var n=document.createElement("p"),i=document.createElement("a");i.setAttribute("href","https://notificationx.com"),i.innerText="Premium",i.style.color="red",n.innerHTML="You need to upgrade to the <strong>"+i.outerHTML+" </strong> Version to use this feature",swal({title:"Opps...",content:n,icon:"warning",buttons:[!1,"Close"],dangerMode:!0})}}),e("body").delegate(".nx-group-field .nx-group-field-title","click",function(t){t.preventDefault(),e(t.currentTarget).hasClass("nx-group-field-title")&&e.notificationx.groupToggle(this)}),e("body").delegate(".nx-group-field .nx-group-clone","click",function(){e.notificationx.cloneGroup(this)}),e("body").on("click",".nx-group-field .nx-group-remove",function(){e.notificationx.removeGroup(this)}),e("body").delegate(".nx-media-field-wrapper .nx-media-upload-button","click",function(t){t.preventDefault(),e.notificationx.initMediaField(this)}),e("body").delegate(".nx-media-field-wrapper .nx-media-remove-button","click",function(t){t.preventDefault(),e.notificationx.removeMedia(this)}),e("body").delegate(".nx-settings-menu li","click",function(t){e.notificationx.settingsTab(this)});var t=e(".nx-settings-button");e("body").on("click",".nx-pro-checkbox > label, .nx-radio-pro",function(t){t.preventDefault();var n=document.createElement("p"),i=document.createElement("a");i.setAttribute("href","https://wpdeveloper.net/in/notificationx-pro"),i.innerText="Premium",i.style.color="red";var a=e(this).find(".nx-pro-label");a.hasClass("has-to-update")&&(i.innerText="Latest Pro v"+a.text().toString().replace(/[ >=<]/g,"")),n.innerHTML="You need to upgrade to the <strong>"+i.outerHTML+" </strong> Version to use this module.",swal({title:"Opps...",content:n,icon:"warning",buttons:[!1,"Close"],dangerMode:!0})}),e(".nx-checkbox-area .nx-checkbox input:enabled, .nx-settings-field").on("click",function(e){t.addClass("nx-save-now").removeAttr("disabled").css("cursor","pointer")}),e("body").delegate(".nx-settings-button","click",function(t){t.preventDefault();var n=e(this).parents("#nx-settings-form");e.notificationx.submitSettings(this,n)}),e("body").delegate(".nx-opt-alert","click",function(t){e.notificationx.fieldAlert(this)}),e("body").delegate(".nx-section-reset","click",function(t){t.preventDefault(),e.notificationx.resetSection(this)})},e.notificationx.enabledDisabled=function(){e(".nx-admin-status label").on("click",function(t){t.stopPropagation();var n=e(this),i=n.data("post"),a=n.data("nonce"),o=n.siblings("input"),r=n.data("swal"),c=o.is(":checked");if(r){var s=document.createElement("p"),l=document.createElement("a");return l.setAttribute("href","https://wpdeveloper.net/in/notificationx-pro"),l.innerText="Premium",l.style.color="red",s.innerHTML="You need to upgrade to the <strong>"+l.outerHTML+" </strong> Version to use multiple notification for same type.",void swal({title:"Opps...",content:s,icon:"warning",buttons:[!1,"Close"],dangerMode:!0})}c?(n.siblings(".nx-admin-status-title.nxast-enable").removeClass("active"),n.siblings(".nx-admin-status-title.nxast-disable").addClass("active")):(n.siblings(".nx-admin-status-title.nxast-disable").removeClass("active"),n.siblings(".nx-admin-status-title.nxast-enable").addClass("active")),e.ajax({type:"post",url:window.ajaxurl,data:{action:"notifications_toggle_status",post_id:i,nonce:a,status:c?"inactive":"active",url:window.location.href},success:function(e){"success"!==e&&(window.location.href=window.location.href)}})})},e.notificationx.initializeFields=function(){e(".nx-meta-field, .nx-settings-field").length>0&&e(".nx-meta-field, .nx-settings-field").map(function(t,n){if("SELECT"===n.nodeName){var i={},a=e("#nx_meta_"+e(n).data("nxajax")).val(),o={ajax:{url:ajaxurl,method:"GET",dataType:"json",cache:!0,data:function(t){return{action:e(n).data("ajax_action"),form_id:e("#nx_meta_"+e(n).data("nxajax")).val()}},processResults:function(e){return{results:e}}}};if(e(n).data("nxajax")&&e(n).data("ajax_action").length>0&&(i=e.extend(i,o)),e(n).select2(i),null!=a){var r=e(n).data("value");Object.keys(i).length>0&&e(n).data("ajax_action").length>0&&e.ajax({type:"GET",url:ajaxurl,data:{action:e(n).data("ajax_action"),form_id:a}}).then(function(t){var i=JSON.parse(t);if("object"==typeof i){var a=i.filter(function(e){return e.id===r});0===a.length&&(a=i),0===r.length&&(r=a[0].id);var o=new Option(a[0].text,r,!0,!0);e(n).append(o).trigger("change"),e(n).trigger({type:"select2:select",params:{data:t}})}})}}}),e(".nx-countdown-datepicker").length>0&&e("body .nx-control").find(".nx-countdown-datepicker").each(function(t,n){"timepicker"===e(n).find("input").data("only")?e(n).find("input").flatpickr({enableTime:!0,noCalendar:!0,dateFormat:"h:i K"}):e(n).find("input").flatpickr({enableTime:!0,dateFormat:"D, M d, Y h:i K"})}),e(".notificationx-metabox-wrapper .nx-meta-field:not(.nx_meta_conversion_from)").trigger("change"),e(".nx-settings .nx-settings-field").trigger("change"),e(".nx-colorpicker-field").length>0&&void 0!==e.fn.wpColorPicker&&e(".nx-colorpicker-field").each(function(){var t=e(this).val();e(this).wpColorPicker({change:function(t,n){var i=t.target,a=n.color.toString();e(i).parents(".wp-picker-container").find("input.nx-colorpicker-field").val(a).trigger("change")}}).parents(".wp-picker-container").find(".wp-color-result").css("background-color","#"+t)}),e.notificationx.groupField(),e.notificationx.template(),e(".nx-meta-template-editable").trigger("blur")},e.notificationx.groupField=function(){e(".nx-group-field-wrapper").length<0||(e(".nx-group-field-wrapper").find("div.nx-group-field:last-of-type").addClass("open"),e(".nx-group-field-wrapper").each(function(){var t=e(this),n=t.find(".nx-group-field");t.find(".nx-group-field:first"),t.find(".nx-group-field:last");n.each(function(){var t=e(this).find(".nx-group-field-title:not(.open)").next();t.is(":visible")&&t.addClass("open")}),t.find(".nx-group-field-add").on("click",function(n){n.preventDefault();var i=t.attr("id"),a=t.data("name"),o=(t.find(".nx-group-fields-wrapper"),t.find(".nx-group-field")),r=(t.find(".nx-group-field:first"),t.find(".nx-group-field:last")),c=e(t.find(".nx-group-template").html()),s=parseInt(r.data("id")),l=1;c.data("group-title");isNaN(s)||(l=s+1),o.each(function(){e(this).removeClass("open")}),c.attr("data-id",l),c.addClass("open"),c.find("tr.nx-field[id*="+i+"]").each(function(){var t=a,n=e(this).attr("id").split("[1]")[1],i=t+"["+l+"]"+n,o=e(this).find("th label");e(this).find('[name*="'+t+'[1]"]').each(function(){var t=e(this).attr("name").split("[1]"),n=t[0],i=t[1],a=n+"["+l+"]"+i;e(this).attr("id",a).attr("name",a),o.attr("for",a)}),e(this).attr("id",i)}),c.insertBefore(e(this)),e.notificationx.resetFieldIds(e(this).parents(".nx-group-fields-wrapper").find(".nx-group-field")),e(".nx-countdown-datepicker").length>0&&e("body .nx-group-field").find(".nx-countdown-datepicker").each(function(t,n){var i=e(n).find("input"),a=i.val();i.flatpickr({enableTime:!0,defaultDate:a,dateFormat:"D, M d, Y h:i K"})})})}))},e.notificationx.tabChanger=function(t){var n,i,a=e(t),o=a.data("tabid"),r=a.data("tab");if(""!=r&&(n=e("#nx-"+r),e("#nx_builder_current_tab").val(r)),a.hasClass("nx-quick-builder-btn")&&(i=a.hasClass("btn-next")?"right":"left"),"BUTTON"!==t.nodeName)return a.parent().find("li").each(function(t){t<o?e(this).addClass("nx-complete"):e(this).removeClass("nx-complete")}),a.addClass("active").siblings().removeClass("active"),void n.addClass("active").siblings().removeClass("active");if(void 0===n)return console.log("add popup"),void e("#publish").trigger("click");var c=e(".nx-builder-tab-menu").find('li[data-tab="content_tab"]'),s="none";if(c.length>0){if(null!=c[0])s=c[0].style.display,s=e('.nx-builder-tab-menu li[data-tabid="'+o+'"]')[0].style.display;"none"==s&&null!=i&&("left"==i?o-=1:o+=1)}e('.nx-metatab-menu li[data-tabid="'+o+'"]').trigger("click"),e('.nx-builder-tab-menu li[data-tabid="'+o+'"]').trigger("click")},e.notificationx.toggleFields=function(){e("body").delegate(".nx-meta-field, .nx-settings-field","change",function(t){"radio"!=this.type?e.notificationx.checkDependencies(this):this.checked&&e.notificationx.checkDependencies(this)}),e("body").delegate(".nx-meta-field, .nx-settings-field","click",function(t){if(this.dataset.hasOwnProperty("swal")&&this.dataset.swal)return e.notificationx.fieldAlert(this),void t.preventDefault()})},e.notificationx.toggle=function(t,n,i,a,o){var r=0;if(a=void 0===a?"":a,void 0!==t)for(;r<t.length;r++){var c=i+t[r]+a;notificationx.template.indexOf(o)>=0&&(c="#nx_meta_"+o+"_"+t[r]+a);var s=e(c);if(null!=s[0])"SELECT"===s[0].nodeName&&s.next()[n]();e(c)[n]()}},e.notificationx.checkDependencies=function(t){if(null!==notificationx.toggleFields){var n=e(t),i=n.parents(".nx-field:first").data("id"),a=n.val();if("checkbox"===n.attr("type")&&(a=n.is(":checked")?1:0),n.hasClass("nx-theme-selected")){var o=n.parents(".nx-theme-control-wrapper").data("name");a=e("#"+o).val()}var r=i;if(notificationx.template.indexOf(i)>=0&&(i=n.data("subkey")),notificationx.toggleFields.hasOwnProperty(i)){var c=notificationx.toggleFields[i].hasOwnProperty(a),s=!0;if(notificationx.hideFields[i])s=notificationx.hideFields[i].hasOwnProperty(a);notificationx.toggleFields.hasOwnProperty(i)&&s&&e.each(notificationx.toggleFields[i],function(t,n){e.notificationx.toggle(n.fields,"hide","#nx-meta-","",r),e.notificationx.toggle(n.sections,"hide","#nx-meta-section-","",r)}),c&&(e.notificationx.toggle(notificationx.toggleFields[i][a].fields,"show","#nx-meta-","",r),e.notificationx.toggle(notificationx.toggleFields[i][a].sections,"show","#nx-meta-section-","",r))}if(notificationx.hideFields.hasOwnProperty(i)){var l=notificationx.hideFields[i];l.hasOwnProperty(a)&&(e.notificationx.toggle(l[a].fields,"hide","#nx-meta-","",r),e.notificationx.toggle(l[a].sections,"hide","#nx-meta-section-","",r))}}},e.notificationx.selectTheme=function(t){var n=e(t),i=n.find("img").data("theme"),a=e(n.parents(".nx-theme-control-wrapper")).data("name");n.addClass("nx-theme-selected").siblings().removeClass("nx-theme-selected"),e("#"+a).val(i),n.trigger("change")},e.notificationx.groupToggle=function(t){var n=e(t).parents(".nx-group-field");n.hasClass("open")?n.removeClass("open"):n.addClass("open").siblings().removeClass("open")},e.notificationx.removeGroup=function(t){var n=e(t).parents(".nx-group-field").attr("data-id"),i=e(t).parents('.nx-group-field[data-id="'+n+'"]'),a=i.parent();i.fadeOut({duration:300,complete:function(){e(this).remove()}}),e.notificationx.resetFieldIds(a.find(".nx-group-field"))},e.notificationx.cloneGroup=function(t){var n=e(t).parents(".nx-group-field").attr("data-id"),i=e(t).parents('.nx-group-field[data-id="'+n+'"]'),a=e(i.clone()),o=e(t).parents(".nx-group-fields-wrapper").find(".nx-group-field:last"),r=i.parent(),c=e(o).data("id")+1;i.removeClass("open"),a.attr("data-id",c),a.insertAfter(i),e.notificationx.resetFieldIds(r.find(".nx-group-field")),e(".nx-countdown-datepicker").length>0&&e("body .nx-group-field").find(".nx-countdown-datepicker").each(function(t,n){var i=e(n).find("input"),a=i.val();i.flatpickr({enableTime:!0,defaultDate:a,dateFormat:"D, M d, Y h:i K"})})},e.notificationx.resetFieldIds=function(t){if(!(t.length<=0)){var n=0;t.map(function(t,i){var a=(i=e(i)).data("field-name"),o=i.find(".nx-group-field-info").data("info").group_sub_fields;i.attr("data-id",n),i.find("tr.nx-field").each(function(t,i){var r=(i=e(e(i)[0])).find('[name*="nx_meta_'+a+'"]'),c=r.attr("data-key"),s=o[t].original_name,l=a+"["+n+"]["+s+"]",d="nx-meta-"+l,x="nx_meta_"+l;i.attr("data-id",l),i.attr("id",d),null!=c&&1===r.length?(r.attr("id",x),r.attr("name",x),r.attr("data-key",l)):r.length>1&&r.each(function(t,n){if("text"===n.type)var i=x+"[url]";if("hidden"===n.type)i=x+"[id]";(n=e(n)).attr("id",i),n.attr("name",i),n.attr("data-key",l)})}),n++})}},e.notificationx.initMediaField=function(t){var n=(t=e(t)).parents(".nx-media-field-wrapper"),i=n.find(".nx-media-remove-button"),a=n.find(".nx-thumb-container"),o=n.find(".nx-media-id"),r=n.find(".nx-media-url"),c=wp.media({title:"Upload Photo",button:{text:"Use this photo"},multiple:!1});c.on("select",function(){var e=c.state().get("selection").first().toJSON();a.addClass("nx-has-thumb").append('<img src="'+e.url+'" alt="NotificationX" style="max-width:100%;"/>'),o.val(e.id),r.val(e.url),t.addClass("hidden"),i.removeClass("hidden")}),c.open()},e.notificationx.removeMedia=function(t){var n=(t=e(t)).parents(".nx-media-field-wrapper"),i=n.find(".nx-media-upload-button"),a=n.find(".nx-has-thumb"),o=n.find(".nx-media-id"),r=n.find(".nx-media-url");a.removeClass("nx-has-thumb").find("img").remove(),r.val(""),o.val(""),t.addClass("hidden"),i.removeClass("hidden")},e.notificationx.fieldAlert=function(e){var t=document.createElement("p"),n=document.createElement("a");n.setAttribute("href","https://wpdeveloper.net/in/notificationx-pro"),n.innerText="Premium",n.style.color="red",t.innerHTML="You need to upgrade to the <strong>"+n.outerHTML+" </strong> Version to use this feature",swal({title:"Opps...",content:t,icon:"warning",buttons:[!1,"Close"],dangerMode:!0})},e.notificationx.resetSection=function(t){var n=(t=e(t)).parents(".nx-meta-section").find(".nx-meta-field");window.fieldsss=n,n.map(function(t,n){var i=(n=e(n)).data("default");n.val(i),n.hasClass("wp-color-picker")&&n.parents(".wp-picker-container").find(".wp-color-result").removeAttr("style"),"nx_meta_border"==n[0].id?n.trigger("click"):n.trigger("change")})},e.notificationx.settingsTab=function(t){var n=(t=e(t)).data("tab");t.addClass("active").siblings().removeClass("active"),e("#nx-"+n).addClass("active").siblings().removeClass("active")},e.notificationx.submitSettings=function(t,n){var i=(t=e(t)).data("key"),a=t.data("nonce"),o=e(n).serializeArray();e.ajax({type:"POST",url:ajaxurl,data:{action:"nx_general_settings",key:i,nonce:a,form_data:o},beforeSend:function(){t.html('<svg id="nx-spinner" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 48 48"><circle cx="24" cy="4" r="4" fill="#fff"/><circle cx="12.19" cy="7.86" r="3.7" fill="#fffbf2"/><circle cx="5.02" cy="17.68" r="3.4" fill="#fef7e4"/><circle cx="5.02" cy="30.32" r="3.1" fill="#fef3d7"/><circle cx="12.19" cy="40.14" r="2.8" fill="#feefc9"/><circle cx="24" cy="44" r="2.5" fill="#feebbc"/><circle cx="35.81" cy="40.14" r="2.2" fill="#fde7af"/><circle cx="42.98" cy="30.32" r="1.9" fill="#fde3a1"/><circle cx="42.98" cy="17.68" r="1.6" fill="#fddf94"/><circle cx="35.81" cy="7.86" r="1.3" fill="#fcdb86"/></svg><span>Saving...</span>')},success:function(n){t.html("Save Settings"),"success"===(n=n.trim())?(swal({title:"Settings Saved!",text:"Click OK to continue",icon:"success",buttons:[!1,"Ok"],timer:2e3}),e(".nx-save-now").removeClass("nx-save-now")):swal({title:"Settings Not Saved!",text:"Click OK to continue",icon:"error",buttons:[!1,"Ok"]})}})},e.notificationx.template=function(t){e(".nx-meta-template-editable").prop("disabled",!0),e(".nx-meta-template-editable").on("blur",function(){var t,n,i=e(this),a=i[0].innerText.trim().split("\n"),o=[],r=i[0].nextElementSibling.children;null!=a&&a.forEach(function(n,i){if(""!=n){var a=n.match(/\{\{[^\s]*\}\}/g);e(r[i]).val(n),null!=a?(a.forEach(function(e,i){t=i>0?t.replace(e,'<span style="color:red">'+e+"</span>"):n.replace(e,'<span style="color:red">'+e+"</span>")}),o.push(t)):o.push(n)}}),n=o.join("<br>"),i.html(n)})},e.notificationx.get_query_vars=function(e){var t={};return window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(e,n,i){t[n]=i}),""!=e?t[e]:t},e.notificationx.testReport=function(){e.ajax({type:"post",url:window.ajaxurl,data:{action:"nx_email_report_test",email:e("#nx_meta_reporting_email").val()},success:function(e){e.success?swal({title:"",text:"Successfully Sent a Test Report in Your Email.",icon:"success",buttons:[!1,"Ok"],timer:2e3}):swal({title:"",text:"Something went wrong regarding sending email.",icon:"error",buttons:[!1,"Ok"],timer:2e3})}})}}(jQuery);