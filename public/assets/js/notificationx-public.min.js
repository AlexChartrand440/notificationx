!function(l){"use strict";l.notificationx=l.notificationx||{},l.notificationx.active_pressbar=0,l(document).ready(function(){l.notificationx.init()}),l.notificationx.init=function(){l.notificationx.windowWidth=l(window).outerWidth(),l.notificationx.pressbar(),l.notificationx.conversions(),l.notificationx.events()},l.notificationx.pressbar=function(){var i=l(".nx-bar");if(0<i.length){var t=i.height(),n=1e3*i[0].dataset.initial_delay,o=i[0].dataset.auto_hide,e=i[0].dataset.position;if(setTimeout(function(){l("body").addClass("has-nx-bar").css("padding-"+e,t)},n),o){var a=1e3*i[0].dataset.hide_after;setTimeout(function(){l("body").css("padding-"+e,0).removeClass("has-nx-bar")},a)}i.each(function(i,s){var t=s.dataset.press_id,n=s.dataset.hide_after,o=s.dataset.auto_hide,e=s.dataset.close_forever,a=new Date(s.dataset.start_date),c=new Date(s.dataset.end_date),r=a.getTime(),f=c.getTime(),d=(new Date).getTime();if(r<d&&d<f)var x=setInterval(function(){var i=(new Date).getTime(),t=f-i,n=Math.floor(t/864e5),o=Math.floor(t%864e5/36e5),e=Math.floor(t%36e5/6e4),a=Math.floor(t%6e4/1e3);s.querySelector(".nx-days").innerHTML=n,s.querySelector(".nx-hours").innerHTML=o,s.querySelector(".nx-minutes").innerHTML=e,s.querySelector(".nx-seconds").innerHTML=a,t<0&&(clearInterval(x),s.querySelector(".nx-countdown").classList.add("nx-expired"))},1e3);else s.querySelector(".nx-countdown").classList.add("nx-expired");l.notificationx.showBar(s,t),""===n&&void 0===n||!parseInt(o)||setTimeout(function(){l.notificationx.hideBar("nx-bar-"+t,e)},1e3*parseInt(n))})}},l.notificationx.conversions=function(){"undefined"!=typeof notificationx&&(window.localStorage.removeItem("nx_notifications"),0<notificationx.conversions.length&&(1<notificationx.conversions.length?notificationx.conversions.map(function(i){l.notificationx.process(i)}):l.notificationx.process(notificationx.conversions[0])),0<notificationx.reviews.length&&(1<notificationx.reviews.length?notificationx.reviews.map(function(i){l.notificationx.process(i)}):l.notificationx.process(notificationx.reviews[0])),0<notificationx.stats.length&&(1<notificationx.stats.length?notificationx.stats.map(function(i){l.notificationx.process(i)}):l.notificationx.process(notificationx.stats[0])),0<notificationx.comments.length&&l.notificationx.process(notificationx.comments[0]),0<notificationx.pro_ext.length&&notificationx.pro_ext.map(function(i,t){l.notificationx.process(i)}))},l.notificationx.events=function(){var i=l(".nx-bar .nx-close");null!==i&&i.on("click",function(i){var t=l("#"+i.currentTarget.offsetParent.id).data("position");l.notificationx.active_pressbar=0,l.notificationx.hideBar(i.currentTarget.offsetParent.id),l("body").css("padding-"+t,0).removeClass("has-nx-bar")})},l.notificationx.showBar=function(t,n){if(Cookies.get("notificationx_nx-bar-"+n))return!1;var i=parseInt(t.dataset.initial_delay),o=l(t).children(".nx-bar-inner"),e=document.querySelector("#wpadminbar"),a=null!=e?e.offsetHeight:0;""!==i&&!isNaN(i)||(i=0),setTimeout(function(){var i=l("html");i.addClass("nx-bar-active"),l(t).hasClass("nx-position-top")&&(l(i).animate([{"padding-top":0},{"padding-top":o+"px"}],{duration:300}),i.css("padding-top",o+"px"),l(t).animate([{top:"0px"},{top:a+"px"}],{duration:300}),l(t).css("top",a+"px")),l(t).addClass("nx-bar-visible"),l("body").trigger("nx_frontend_bar_show",[t,n]),l.notificationx.active_pressbar=1},1e3*i)},l.notificationx.hideBar=function(i){var t=l(".nx-bar#"+i),n=l("html");if(t[0].dataset.close_forever){var o=(new Date).getTime()+5184e6,e=new Date(o);Cookies.set("notificationx_"+i,!0,{expires:e,path:"/"})}n.removeClass("nx-bar-active"),n.css("padding-top",0),t.animate({height:"0px"},300),t.removeClass("nx-bar-visible"),l.notificationx.active_pressbar=0},l.notificationx.render=function(t,i){var n=document.createElement("div");n.classList.add("notificationx-conversions"),n.insertAdjacentHTML("beforeend",i);var o=0,e=n.querySelectorAll(".notificationx-"+t.id),a=t.delay_between,s=l.notificationx.last(t.id,!1);0<=s&&(o=s+1),0===t.loop&&1===e.length&&(o=0),l("body").trigger("nx_before_render",[t,i]),setTimeout(function(){l.notificationx.show(e[o],t,o),setTimeout(function(){l.notificationx.hide(e[o]),o++;var i=setInterval(function(){l.notificationx.show(e[o],t,o),setTimeout(function(){l.notificationx.hide(e[o]),o>=e.length-1?(o=0)==t.loop&&clearInterval(i):o++},t.display_for)},a+t.display_for)},t.display_for)},t.delay_before)},l.notificationx.process=function(i){fetch(notificationx.ajaxurl,{method:"POST",credentials:"same-origin",headers:new Headers({"Content-Type":"application/x-www-form-urlencoded"}),body:"action=nx_get_conversions&nonce="+notificationx.nonce+"&ids="+i}).then(function(i){return i.json()}).then(function(i){l.notificationx.render(i.config,i.content)}).catch(function(i){})},l.notificationx.show=function(i,t,n){if(void 0!==i&&0!==i.length&&!Cookies.get("nx-close-for-session")){var o=l("body"),e=-1!=i.classList.value.indexOf("nx-mobile-notification"),a=e?"10px":"30px";o.append(i),480<l.notificationx.windowWidth&&e&&(a="20px"),786<l.notificationx.windowWidth&&(a="30px"),l(i).animate({bottom:a,opacity:1},500),o.trigger("nx_frontend_jquery",[t,i]),l.notificationx.save(t.id,n);var s=l(i).find(".notificationx-close");null!=s&&s.on("click",function(i){var t=l(this),n=l(t[0]).parents(".nx-notification");l.notificationx.hide(n),Cookies.set("nx-close-for-session",1)})}},l.notificationx.hide=function(i){void 0!==i&&(Cookies.get("nx-close-for-session")||(l(i).animate({bottom:"0px",opacity:0},500),setTimeout(function(){l.notificationx.remove(l(i))},300)))},l.notificationx.remove=function(i){i.remove()},l.notificationx.save=function(i,t){if(window.localStorage){var n=l.notificationx.last(i,!0);"object"==typeof n?n[i]=t:(n=new Object)[i]=t,window.localStorage.setItem("nx_notifications",JSON.stringify(n))}else console.log("Browser does not support localStorage!")},l.notificationx.last=function(i,t){var n=-1;if(window.localStorage){var o=window.localStorage.getItem("nx_notifications");if(null!==o&&void 0!==(o=JSON.parse(o))[i]){if(t)return o;n=o[i]}}else console.log("Browser does not support localStorage!");return n}}(jQuery);