!function(m){"use strict";m.notificationx=m.notificationx||{},m.notificationx.active_pressbar=0,m(document).ready(function(){m.notificationx.init()}),m.notificationx.init=function(){m.notificationx.windowWidth=m(window).outerWidth(),m.notificationx.pressbar(),m.notificationx.conversions(),m.notificationx.events()},m.notificationx.pressbar=function(){var i=m(".nx-bar");0<i.length&&i.each(function(i,r){var n=r.dataset.press_id,t=r.dataset.hide_after,o=r.dataset.auto_hide,e=r.dataset.close_forever,a=new Date(r.dataset.start_date),s=new Date(r.dataset.end_date),c=a.getTime(),f=s.getTime(),x=(new Date).getTime(),d=m(r).outerHeight(),l=1e3*r.dataset.initial_delay,u=r.dataset.position,p=r.dataset.body_push;if(Cookies.get("notificationx_nx-bar-"+n))return!1;if("pushed"!=p&&null!=p||(setTimeout(function(){m("body").addClass("has-nx-bar").css("padding-"+u,d)},l),parseInt(o)&&setTimeout(function(){m("body").css("padding-"+u,0).removeClass("has-nx-bar")},1e3*parseInt(t))),c<x&&x<f)var v=setInterval(function(){var i=Date.now(),n=f-i,t=Math.floor(n/864e5),o=Math.floor(n%864e5/36e5),e=Math.floor(n%36e5/6e4),a=Math.floor(n%6e4/1e3);if(r.querySelector(".nx-days").innerHTML=t,r.querySelector(".nx-hours").innerHTML=o,r.querySelector(".nx-minutes").innerHTML=e,r.querySelector(".nx-seconds").innerHTML=a,n<0){clearInterval(v),r.querySelector(".nx-countdown").classList.add("nx-expired");var s=r.querySelector(".nx-countdown-text");null!=s&&s.classList.add("nx-expired")}},1e3);else{var h=r.querySelector(".nx-countdown");null!=h&&h.classList.add("nx-expired");var g=r.querySelector(".nx-countdown-text");null!=g&&g.classList.add("nx-expired")}m.notificationx.showBar(r,n),""===t&&void 0===t||!parseInt(o)||setTimeout(function(){m.notificationx.hideBar("nx-bar-"+n,e)},1e3*parseInt(t))})},m.notificationx.conversions=function(){"undefined"!=typeof notificationx&&(window.localStorage.removeItem("nx_notifications"),0<notificationx.conversions.length&&(1<notificationx.conversions.length?notificationx.conversions.map(function(i){m.notificationx.process(i)}):m.notificationx.process(notificationx.conversions[0])),0<notificationx.reviews.length&&(1<notificationx.reviews.length?notificationx.reviews.map(function(i){m.notificationx.process(i)}):m.notificationx.process(notificationx.reviews[0])),0<notificationx.form.length&&(1<notificationx.form.length?notificationx.form.map(function(i){m.notificationx.process(i)}):m.notificationx.process(notificationx.form[0])),0<notificationx.stats.length&&(1<notificationx.stats.length?notificationx.stats.map(function(i){m.notificationx.process(i)}):m.notificationx.process(notificationx.stats[0])),0<notificationx.comments.length&&m.notificationx.process(notificationx.comments[0]),0<notificationx.pro_ext.length&&notificationx.pro_ext.map(function(i,n){m.notificationx.process(i)}))},m.notificationx.events=function(){var i=m(".nx-bar .nx-close");null!==i&&i.on("click",function(i){var n=m("#"+i.currentTarget.offsetParent.id).data("position");m.notificationx.active_pressbar=0,m.notificationx.hideBar(i.currentTarget.offsetParent.id),m("body").css("padding-"+n,0).removeClass("has-nx-bar")})},m.notificationx.showBar=function(n,t){if(Cookies.get("notificationx_nx-bar-"+t))return!1;var i=parseInt(n.dataset.initial_delay),o=m(n).children(".nx-bar-inner"),e=document.querySelector("#wpadminbar"),a=null!=e?e.offsetHeight:0;""!==i&&!isNaN(i)||(i=0),setTimeout(function(){var i=m("html");i.addClass("nx-bar-active"),m(n).hasClass("nx-position-top")&&(m(i).animate([{"padding-top":0},{"padding-top":o+"px"}],{duration:300}),i.css("padding-top",o+"px"),m(n).animate([{top:"0px"},{top:a+"px"}],{duration:300}),m(n).css("top",a+"px")),m(n).addClass("nx-bar-visible"),m("body").trigger("nx_frontend_bar_show",[n,t]),m.notificationx.active_pressbar=1},1e3*i)},m.notificationx.hideBar=function(i){var n=m(".nx-bar#"+i),t=m("html");if(n[0].dataset.close_forever){var o=(new Date).getTime()+5184e6,e=new Date(o);Cookies.set("notificationx_"+i,!0,{expires:e,path:"/"})}t.removeClass("nx-bar-active"),t.css("padding-top",0),n.animate({height:"0px"},300),n.removeClass("nx-bar-visible"),m.notificationx.active_pressbar=0},m.notificationx.render=function(n,i){var t=document.createElement("div");t.classList.add("notificationx-conversions"),t.insertAdjacentHTML("beforeend",i);var o=0,e=t.querySelectorAll(".notificationx-"+n.id),a=n.delay_between,s=m.notificationx.last(n.id,!1);0<=s&&(o=s+1),0===n.loop&&1===e.length&&(o=0),m("body").trigger("nx_before_render",[n,i]),setTimeout(function(){m.notificationx.show(e[o],n,o),setTimeout(function(){m.notificationx.hide(e[o]),o++;var i=setInterval(function(){m.notificationx.show(e[o],n,o),setTimeout(function(){m.notificationx.hide(e[o]),o>=e.length-1?(o=0)==n.loop&&clearInterval(i):o++},n.display_for)},a+n.display_for)},n.display_for)},n.delay_before)},m.notificationx.process=function(i){fetch(notificationx.ajaxurl,{method:"POST",credentials:"same-origin",headers:new Headers({"Content-Type":"application/x-www-form-urlencoded"}),body:"action=nx_get_conversions&nonce="+notificationx.nonce+"&ids="+i}).then(function(i){return i.json()}).then(function(i){m.notificationx.render(i.config,i.content)}).catch(function(i){console.log("AJAX error, Something went wrong! Please, Contact support team.")})},m.notificationx.show=function(i,n,t){if(void 0!==i&&0!==i.length&&!Cookies.get("nx-close-for-session")){var o=m(i).find("img");if(a=-1,null!=(o=o[0]))var e=o.src,a=o.src.indexOf(".gif");var s=m("body"),r=-1!=i.classList.value.indexOf("nx-mobile-notification"),c=r?"10px":"30px";s.append(i),0<a&&(o.src=e),480<m.notificationx.windowWidth&&r&&(c="20px"),786<m.notificationx.windowWidth&&(c="30px"),m(i).animate({bottom:c,opacity:1},500),s.trigger("nx_frontend_jquery",[n,i]),m.notificationx.save(n.id,t);var f=m(i).find(".notificationx-close");null!=f&&f.on("click",function(i){var n=m(this),t=m(n[0]).parents(".nx-notification");m.notificationx.hide(t),Cookies.set("nx-close-for-session",1)})}},m.notificationx.hide=function(i){void 0!==i&&(Cookies.get("nx-close-for-session")||(m(i).animate({bottom:"0px",opacity:0},500),setTimeout(function(){m.notificationx.remove(m(i))},300)))},m.notificationx.remove=function(i){i.remove()},m.notificationx.save=function(i,n){if(window.localStorage){var t=m.notificationx.last(i,!0);"object"==typeof t?t[i]=n:(t=new Object)[i]=n,window.localStorage.setItem("nx_notifications",JSON.stringify(t))}else console.log("Browser does not support localStorage!")},m.notificationx.last=function(i,n){var t=-1;if(window.localStorage){var o=window.localStorage.getItem("nx_notifications");if(null!==o&&void 0!==(o=JSON.parse(o))[i]){if(n)return o;t=o[i]}}else console.log("Browser does not support localStorage!");return t}}(jQuery);